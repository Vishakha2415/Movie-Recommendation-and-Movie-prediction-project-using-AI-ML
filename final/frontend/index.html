<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CineAI - Movie Analysis & Recommendation System</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      /* Global Styles */
      :root {
        --primary: #4361ee;
        --primary-dark: #3a56d4;
        --secondary: #7209b7;
        --success: #4cc9f0;
        --danger: #f72585;
        --light: #f8f9fa;
        --dark: #212529;
        --gray: #6c757d;
        --accent: #ffd166;
        --purple: #9d4edd;
        --blue: #118ab2;
        --card-bg: #16213e;
        --darker: #0f0f1e;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
        color: var(--light);
        min-height: 100vh;
        line-height: 1.6;
      }

      .container {
        max-width: 1600px;
        margin: 0 auto;
        padding: 20px;
      }

      /* Header */
      header {
        text-align: center;
        padding: 40px 0;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 20px;
        margin-bottom: 40px;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .logo {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 20px;
        margin-bottom: 20px;
      }

      .logo-icon {
        width: 70px;
        height: 70px;
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        border-radius: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 32px;
      }

      h1 {
        font-size: 3.5rem;
        background: linear-gradient(to right, var(--primary), var(--success));
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        margin-bottom: 10px;
      }

      .subtitle {
        font-size: 1.2rem;
        color: #aaa;
        max-width: 700px;
        margin: 0 auto 20px;
      }

      .api-status {
        display: inline-block;
        padding: 5px 15px;
        background: rgba(0, 255, 0, 0.1);
        color: #0f0;
        border-radius: 20px;
        font-size: 0.8rem;
      }

      /* Navigation */
      .nav-tabs {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin: 30px auto;
        background: rgba(255, 255, 255, 0.05);
        padding: 15px;
        border-radius: 15px;
        max-width: 600px;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .nav-tab {
        padding: 12px 30px;
        background: rgba(255, 255, 255, 0.1);
        border: none;
        border-radius: 10px;
        color: white;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .nav-tab:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: translateY(-2px);
      }

      .nav-tab.active {
        background: linear-gradient(135deg, var(--primary), var(--primary-dark));
        box-shadow: 0 5px 15px rgba(67, 97, 238, 0.3);
      }

      /* Content Sections */
      .section {
        display: none;
        animation: fadeIn 0.5s ease;
      }

      .section.active {
        display: block;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Prediction Section Styles */
      .main-content {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        margin-bottom: 40px;
      }

      @media (max-width: 992px) {
        .main-content {
          grid-template-columns: 1fr;
        }
      }

      .prediction-card {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 15px;
        padding: 30px;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        transition: transform 0.3s ease;
      }

      .prediction-card:hover {
        transform: translateY(-5px);
        background: rgba(255, 255, 255, 0.08);
      }

      .card-header {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 25px;
        padding-bottom: 15px;
        border-bottom: 2px solid rgba(255, 255, 255, 0.1);
      }

      .card-icon {
        width: 50px;
        height: 50px;
        background: linear-gradient(
          135deg,
          var(--primary),
          var(--primary-dark)
        );
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 22px;
      }

      .card-2 .card-icon {
        background: linear-gradient(135deg, var(--secondary), #5a08a3);
      }

      .card-title {
        font-size: 1.8rem;
        font-weight: 600;
      }

      .form-group {
        margin-bottom: 20px;
      }

      label {
        display: block;
        margin-bottom: 8px;
        font-weight: 500;
        color: #ddd;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      input,
      select {
        width: 100%;
        padding: 15px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 8px;
        color: white;
        font-size: 16px;
        transition: all 0.3s ease;
      }

      input:focus,
      select:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.3);
      }

      input::placeholder {
        color: rgba(255, 255, 255, 0.5);
      }

      .predict-btn {
        width: 100%;
        padding: 18px;
        background: linear-gradient(
          135deg,
          var(--primary),
          var(--primary-dark)
        );
        border: none;
        border-radius: 8px;
        color: white;
        font-size: 1.2rem;
        font-weight: bold;
        cursor: pointer;
        margin-top: 10px;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
      }

      .predict-btn:hover {
        background: linear-gradient(
          135deg,
          var(--primary-dark),
          var(--primary)
        );
        transform: scale(1.02);
      }

      .card-2 .predict-btn {
        background: linear-gradient(135deg, var(--secondary), #5a08a3);
      }

      .card-2 .predict-btn:hover {
        background: linear-gradient(135deg, #5a08a3, var(--secondary));
      }

      /* Recommendation Section Styles */
      .progress-section {
        background: linear-gradient(
          135deg,
          rgba(255, 107, 139, 0.1),
          rgba(78, 205, 196, 0.1)
        );
        border-radius: 20px;
        padding: 25px;
        margin-bottom: 40px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
      }

      .progress-content {
        display: flex;
        align-items: center;
        justify-content: space-between;
        flex-wrap: wrap;
        gap: 20px;
      }

      .progress-info h3 {
        font-size: 22px;
        margin-bottom: 10px;
        color: var(--light);
      }

      .progress-info p {
        opacity: 0.8;
        color: var(--success);
      }

      .progress-count {
        font-size: 28px;
        font-weight: 700;
        color: var(--primary);
      }

      .progress-bar-container {
        flex: 1;
        max-width: 400px;
      }

      .progress-bar {
        height: 12px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 6px;
        overflow: hidden;
        margin-bottom: 10px;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, var(--primary), var(--secondary));
        border-radius: 6px;
        width: 0%;
        transition: width 0.5s ease;
      }

      .progress-text {
        display: flex;
        justify-content: space-between;
        font-size: 14px;
        opacity: 0.8;
      }

      /* Search Section */
      .search-container {
        background: var(--card-bg);
        border-radius: 15px;
        padding: 30px;
        margin-bottom: 30px;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .search-box {
        display: flex;
        gap: 15px;
        margin-bottom: 25px;
      }

      .search-input {
        flex: 1;
        padding: 18px 25px;
        background: rgba(255, 255, 255, 0.08);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 12px;
        color: white;
        font-size: 16px;
      }

      .search-input:focus {
        outline: none;
        border-color: var(--success);
        background: rgba(255, 255, 255, 0.12);
      }

      .search-btn {
        background: linear-gradient(135deg, var(--success), var(--blue));
        color: white;
        border: none;
        padding: 0 35px;
        border-radius: 12px;
        font-size: 16px;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 10px;
        cursor: pointer;
        transition: transform 0.2s ease;
      }

      .search-btn:hover {
        transform: translateY(-2px);
      }

      .genre-filters {
        margin-top: 20px;
      }

      .genre-title {
        font-size: 18px;
        margin-bottom: 15px;
        color: var(--light);
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .genre-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
      }

      .genre-tag {
        background: rgba(255, 255, 255, 0.08);
        border: 1px solid rgba(255, 255, 255, 0.2);
        padding: 10px 20px;
        border-radius: 25px;
        font-size: 14px;
        color: var(--light);
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .genre-tag:hover {
        background: rgba(255, 255, 255, 0.15);
      }

      .genre-tag.active {
        background: rgba(78, 205, 196, 0.2);
        border-color: var(--success);
        color: var(--success);
      }

      /* Movies Grid */
      .movies-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
        gap: 25px;
        margin-bottom: 40px;
      }

      /* Movie Card */
      .movie-card {
        background: var(--card-bg);
        border-radius: 15px;
        padding: 25px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        position: relative;
        overflow: hidden;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }

      .movie-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
      }

      .movie-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, var(--primary), var(--secondary));
      }

      .movie-number {
        position: absolute;
        top: 20px;
        right: 20px;
        width: 40px;
        height: 40px;
        background: linear-gradient(135deg, var(--primary), var(--purple));
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        font-size: 18px;
      }

      .movie-title {
        font-size: 22px;
        font-weight: 700;
        margin-bottom: 8px;
        color: var(--light);
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .movie-year {
        font-size: 16px;
        color: var(--accent);
        background: rgba(255, 209, 102, 0.1);
        padding: 4px 12px;
        border-radius: 20px;
      }

      .movie-rating {
        display: inline-flex;
        align-items: center;
        gap: 5px;
        color: #ffd700;
        font-weight: 600;
        margin-bottom: 15px;
      }

      .movie-meta {
        display: flex;
        gap: 15px;
        margin-bottom: 15px;
        flex-wrap: wrap;
      }

      .movie-genre {
        color: var(--success);
        font-weight: 500;
        background: rgba(78, 205, 196, 0.1);
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 14px;
      }

      .movie-duration {
        color: var(--blue);
        display: flex;
        align-items: center;
        gap: 5px;
      }

      .movie-director {
        color: var(--purple);
        font-style: italic;
      }

      .movie-description {
        font-size: 15px;
        line-height: 1.6;
        opacity: 0.9;
        margin-bottom: 20px;
        height: 70px;
        overflow: hidden;
      }

      .movie-actors {
        font-size: 14px;
        opacity: 0.7;
        margin-bottom: 25px;
        font-style: italic;
        color: var(--success);
      }

      /* Rating Buttons */
      .rating-buttons {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }

      .rating-btn {
        padding: 14px;
        border: none;
        border-radius: 10px;
        font-size: 16px;
        font-weight: 600;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .rating-btn:hover {
        transform: translateY(-2px);
      }

      .btn-like {
        background: linear-gradient(135deg, #06d6a0, #0acf83);
        color: white;
      }

      .btn-dislike {
        background: linear-gradient(135deg, var(--danger), #ff3366);
        color: white;
      }

      .rating-btn.rated {
        opacity: 0.8;
        transform: none;
      }

      /* Search Results */
      .search-results {
        margin-top: 40px;
        display: none;
      }

      .section-title {
        font-size: 28px;
        margin-bottom: 30px;
        display: flex;
        align-items: center;
        gap: 15px;
        color: var(--light);
      }

      .section-title i {
        color: var(--accent);
        background: rgba(255, 209, 102, 0.2);
        padding: 12px;
        border-radius: 12px;
      }

      /* Action Buttons */
      .action-buttons {
        text-align: center;
        margin: 40px 0;
      }

      .get-rec-btn {
        background: linear-gradient(135deg, var(--primary), var(--purple));
        color: white;
        border: none;
        padding: 18px 45px;
        font-size: 18px;
        font-weight: 700;
        border-radius: 15px;
        display: inline-flex;
        align-items: center;
        gap: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .get-rec-btn:hover:not(:disabled) {
        transform: translateY(-3px);
        box-shadow: 0 10px 20px rgba(157, 78, 221, 0.3);
      }

      .get-rec-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        background: var(--gray);
      }

      .reset-btn {
        background: rgba(255, 255, 255, 0.1);
        color: var(--light);
        border: 1px solid rgba(255, 255, 255, 0.2);
        padding: 12px 25px;
        border-radius: 10px;
        font-size: 16px;
        margin-left: 20px;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .reset-btn:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: translateY(-2px);
      }

      /* Recommendations */
      .recommendations-section {
        margin-top: 40px;
        display: none;
      }

      .recommendations-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
        gap: 25px;
        margin-top: 30px;
      }

      .recommendation-card {
        background: var(--card-bg);
        border-radius: 15px;
        padding: 25px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        position: relative;
        overflow: hidden;
        transition: transform 0.3s ease;
      }

      .recommendation-card:hover {
        transform: translateY(-5px);
      }

      .recommendation-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, var(--success), var(--blue));
      }

      .match-badge {
        background: linear-gradient(90deg, var(--success), var(--blue));
        color: white;
        padding: 8px 18px;
        border-radius: 20px;
        font-weight: 700;
        font-size: 14px;
        display: inline-block;
        margin-bottom: 20px;
      }

      .rec-title {
        font-size: 20px;
        font-weight: 600;
        margin-bottom: 10px;
        color: var(--light);
      }

      .rec-meta {
        display: flex;
        gap: 15px;
        margin-bottom: 15px;
        flex-wrap: wrap;
      }

      .rec-genre {
        color: var(--success);
        font-weight: 500;
      }

      .rec-year {
        color: var(--accent);
      }

      .rec-rating {
        color: #ffd700;
        font-weight: 600;
      }

      .rec-description {
        font-size: 14px;
        line-height: 1.6;
        opacity: 0.9;
        margin-bottom: 20px;
      }

      .rec-reason {
        font-size: 14px;
        background: rgba(78, 205, 196, 0.1);
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 20px;
        border-left: 4px solid var(--success);
        color: var(--success);
      }

      .rec-actions {
        display: flex;
        gap: 10px;
      }

      .rec-btn {
        flex: 1;
        padding: 12px;
        background: rgba(255, 255, 255, 0.1);
        border: none;
        border-radius: 8px;
        color: var(--light);
        font-size: 14px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .rec-btn:hover {
        background: rgba(255, 255, 255, 0.2);
      }

      .btn-watch {
        background: linear-gradient(90deg, var(--blue), var(--success));
        color: white;
      }

      .btn-watch:hover {
        background: linear-gradient(90deg, var(--success), var(--blue));
      }

      /* Prediction Results */
      .result-container {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 15px;
        padding: 40px;
        margin-top: 40px;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        display: none;
      }

      .result-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 30px;
      }

      .result-title {
        font-size: 2rem;
        font-weight: 600;
      }

      .result-badge {
        padding: 12px 30px;
        border-radius: 50px;
        font-weight: bold;
        font-size: 1.3rem;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .hit-badge {
        background: rgba(76, 201, 240, 0.2);
        color: var(--success);
        border: 2px solid var(--success);
        animation: pulse 2s infinite;
      }

      .flop-badge {
        background: rgba(247, 37, 133, 0.2);
        color: var(--danger);
        border: 2px solid var(--danger);
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% {
          box-shadow: 0 0 0 0 rgba(76, 201, 240, 0.4);
        }
        70% {
          box-shadow: 0 0 0 10px rgba(76, 201, 240, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(76, 201, 240, 0);
        }
      }

      .result-content {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 30px;
      }

      @media (max-width: 768px) {
        .result-content {
          grid-template-columns: 1fr;
        }
      }

      .result-details {
        background: rgba(255, 255, 255, 0.03);
        padding: 25px;
        border-radius: 10px;
      }

      .result-metrics {
        background: rgba(255, 255, 255, 0.03);
        padding: 25px;
        border-radius: 10px;
      }

      .metric {
        margin-bottom: 20px;
      }

      .metric-label {
        font-size: 0.9rem;
        color: #aaa;
        margin-bottom: 5px;
      }

      .metric-value {
        font-size: 2rem;
        font-weight: bold;
      }

      .hit-value {
        color: var(--success);
      }

      .flop-value {
        color: var(--danger);
      }

      /* Loading Spinners */
      .loading {
        text-align: center;
        padding: 40px;
        display: none;
      }

      .loading-spinner {
        display: none;
        text-align: center;
        padding: 40px;
      }

      .spinner {
        width: 60px;
        height: 60px;
        border: 5px solid rgba(255, 255, 255, 0.1);
        border-top: 5px solid var(--primary);
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto 20px;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* Empty State */
      .empty-state {
        text-align: center;
        padding: 60px 20px;
        grid-column: 1 / -1;
        color: var(--gray);
      }

      .empty-state i {
        font-size: 48px;
        margin-bottom: 20px;
        color: var(--success);
      }

      /* Footer */
      footer {
        text-align: center;
        padding: 30px 0;
        margin-top: 50px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        color: #aaa;
        font-size: 0.9rem;
      }

      /* Responsive */
      @media (max-width: 768px) {
        .movies-grid,
        .search-results-grid,
        .recommendations-grid {
          grid-template-columns: 1fr;
        }

        .rating-buttons {
          grid-template-columns: 1fr;
        }

        .progress-content {
          flex-direction: column;
          text-align: center;
        }

        .progress-bar-container {
          width: 100%;
          max-width: 100%;
        }

        .get-rec-btn,
        .reset-btn {
          width: 100%;
          justify-content: center;
          margin: 5px 0;
        }

        .action-buttons {
          display: flex;
          flex-direction: column;
          gap: 15px;
        }

        .search-box {
          flex-direction: column;
        }

        .search-btn {
          width: 100%;
          justify-content: center;
          padding: 18px;
        }

        .logo {
          flex-direction: column;
          gap: 10px;
        }

        h1 {
          font-size: 2.5rem;
        }

        .nav-tabs {
          flex-direction: column;
          align-items: center;
        }

        .nav-tab {
          width: 100%;
          justify-content: center;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <header>
        <div class="logo">
          <div class="logo-icon">
            <i class="fas fa-robot"></i>
          </div>
          <div>
            <h1>CineAI</h1>
            <p class="subtitle">
              AI-Powered Movie Analysis & Personalized Recommendation System
            </p>
          </div>
        </div>
        <div style="margin-top: 20px">
          <span
            >API Status:
            <span id="apiStatus" class="api-status">Checking...</span></span
          >
        </div>
      </header>

      <!-- Navigation -->
      <div class="nav-tabs">
        <button class="nav-tab active" data-tab="predictor">
          <i class="fas fa-chart-line"></i> Movie Predictor
        </button>
        <button class="nav-tab" data-tab="recommender">
          <i class="fas fa-magic"></i> Movie Recommender
        </button>
      </div>

      <!-- Movie Predictor Section -->
      <section id="predictor" class="section active">
        <div class="main-content">
          <!-- Predict by Movie Name -->
          <div class="prediction-card">
            <div class="card-header">
              <div class="card-icon">
                <i class="fas fa-search"></i>
              </div>
              <h2 class="card-title">Predict by Movie Name</h2>
            </div>

            <div class="form-group">
              <label for="movieName">
                <i class="fas fa-film"></i> Movie Title
              </label>
              <input
                type="text"
                id="movieName"
                placeholder="e.g., Inception, Avatar, Titanic..."
              />
            </div>

            <div class="form-group">
              <label for="releaseYear">
                <i class="fas fa-calendar-alt"></i> Release Year (Optional)
              </label>
              <input
                type="number"
                id="releaseYear"
                placeholder="2023"
                min="1900"
                max="2030"
              />
            </div>

            <button class="predict-btn" onclick="predictByName()">
              <i class="fas fa-chart-line"></i> Predict Success
            </button>
          </div>

          <!-- Predict by Details -->
          <div class="prediction-card card-2">
            <div class="card-header">
              <div class="card-icon">
                <i class="fas fa-sliders-h"></i>
              </div>
              <h2 class="card-title">Predict by Details</h2>
            </div>

            <div class="form-group">
              <label for="director">
                <i class="fas fa-user-tie"></i> Director
              </label>
              <input
                type="text"
                id="director"
                placeholder="e.g., Christopher Nolan"
              />
            </div>

            <div class="form-group">
              <label for="actor1">
                <i class="fas fa-user"></i> Lead Actor 1
              </label>
              <input
                type="text"
                id="actor1"
                placeholder="e.g., Leonardo DiCaprio"
              />
            </div>

            <div class="form-group">
              <label for="actor2">
                <i class="fas fa-user"></i> Lead Actor 2 (Optional)
              </label>
              <input
                type="text"
                id="actor2"
                placeholder="e.g., Joseph Gordon-Levitt"
              />
            </div>

            <div class="form-group">
              <label for="genre">
                <i class="fas fa-theater-masks"></i> Genre
              </label>
              <select id="genre">
                <option value="">Select a genre</option>
                <option value="action">Action</option>
                <option value="comedy">Comedy</option>
                <option value="drama">Drama</option>
                <option value="sci-fi">Science Fiction</option>
                <option value="horror">Horror</option>
                <option value="thriller">Thriller</option>
                <option value="romance">Romance</option>
                <option value="animation">Animation</option>
              </select>
            </div>

            <button class="predict-btn" onclick="predictByDetails()">
              <i class="fas fa-calculator"></i> Analyze & Predict
            </button>
          </div>
        </div>

        <!-- Loading Indicator -->
        <div class="loading" id="predictorLoading">
          <div class="spinner"></div>
          <p>Analyzing with AI Model... Please wait</p>
        </div>

        <!-- Prediction Result Display -->
        <div class="result-container" id="resultContainer">
          <div class="result-header">
            <h2 class="result-title">Prediction Result</h2>
            <div class="result-badge" id="resultBadge">HIT</div>
          </div>

          <div class="result-content">
            <div class="result-details">
              <h3 style="margin-bottom: 20px; color: var(--success)">
                <i class="fas fa-chart-bar"></i> Analysis Summary
              </h3>
              <p
                id="predictionSummary"
                style="margin-bottom: 20px; font-size: 1.1rem"
              >
                Based on our machine learning analysis...
              </p>

              <div
                style="
                  background: rgba(255, 255, 255, 0.05);
                  padding: 20px;
                  border-radius: 8px;
                "
              >
                <h4 style="margin-bottom: 15px; color: #ddd">
                  <i class="fas fa-info-circle"></i> Key Factors
                </h4>
                <ul id="keyFactors" style="list-style-type: none">
                  <li
                    style="
                      padding: 8px 0;
                      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                    "
                  >
                    <i
                      class="fas fa-check-circle"
                      style="color: var(--success); margin-right: 10px"
                    ></i>
                    Director track record
                  </li>
                  <li
                    style="
                      padding: 8px 0;
                      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                    "
                  >
                    <i
                      class="fas fa-check-circle"
                      style="color: var(--success); margin-right: 10px"
                    ></i>
                    Actor popularity
                  </li>
                  <li style="padding: 8px 0">
                    <i
                      class="fas fa-check-circle"
                      style="color: var(--success); margin-right: 10px"
                    ></i>
                    Genre market trends
                  </li>
                </ul>
              </div>
            </div>

            <div class="result-metrics">
              <h3 style="margin-bottom: 20px; color: var(--success)">
                <i class="fas fa-tachometer-alt"></i> Prediction Metrics
              </h3>

              <div class="metric">
                <div class="metric-label">Predicted Rating</div>
                <div class="metric-value hit-value" id="predictedRating">
                  7.8/10
                </div>
              </div>

              <div class="metric">
                <div class="metric-label">Success Probability</div>
                <div class="metric-value hit-value" id="confidenceScore">
                  85%
                </div>
              </div>

              <div class="metric">
                <div class="metric-label">Box Office Potential</div>
                <div
                  id="boxOfficePotential"
                  style="font-size: 1.5rem; font-weight: bold; color: gold"
                >
                  $$$$
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Movie Recommender Section -->
      <section id="recommender" class="section">
        <!-- Progress Section -->
        <div class="progress-section">
          <div class="progress-content">
            <div class="progress-info">
              <h3><i class="fas fa-chart-line"></i> Your Progress</h3>
              <p>Rate at least 3 movies to get personalized recommendations</p>
            </div>
            <div class="progress-count" id="progressCount">0/3</div>
            <div class="progress-bar-container">
              <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
              </div>
              <div class="progress-text">
                <span>Start by rating movies</span>
                <span>Minimum 3 ratings required</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Search Section -->
        <h2 class="section-title">
          <i class="fas fa-search"></i>
          Search & Rate Movies
        </h2>

        <div class="search-container">
          <div class="search-box">
            <input
              type="text"
              class="search-input"
              id="searchInput"
              placeholder="Search for movies by title, actor, director, or genre..."
            />
            <button class="search-btn" id="searchBtn">
              <i class="fas fa-search"></i> Search
            </button>
          </div>

          <div class="genre-filters">
            <div class="genre-title">
              <i class="fas fa-filter"></i>
              Filter by Genre:
            </div>
            <div class="genre-tags" id="genreTags">
              <div class="genre-tag active" data-genre="all">All</div>
              <div class="genre-tag" data-genre="Action">Action</div>
              <div class="genre-tag" data-genre="Comedy">Comedy</div>
              <div class="genre-tag" data-genre="Drama">Drama</div>
              <div class="genre-tag" data-genre="Romance">Romance</div>
              <div class="genre-tag" data-genre="Thriller">Thriller</div>
              <div class="genre-tag" data-genre="Horror">Horror</div>
              <div class="genre-tag" data-genre="Sci-Fi">Sci-Fi</div>
              <div class="genre-tag" data-genre="Crime">Crime</div>
              <div class="genre-tag" data-genre="Adventure">Adventure</div>
              <div class="genre-tag" data-genre="Fantasy">Fantasy</div>
              <div class="genre-tag" data-genre="Animation">Animation</div>
            </div>
          </div>
        </div>

        <!-- Loading Spinner for Search -->
        <div class="loading-spinner" id="searchLoading">
          <div class="spinner"></div>
          <p>Searching movies from IMDb dataset...</p>
        </div>

        <!-- Search Results -->
        <div class="search-results" id="searchResults">
          <div class="section-title">
            <i class="fas fa-search"></i>
            Search Results
          </div>
          <div class="search-results-grid" id="searchResultsGrid">
            <!-- Search results will be populated by backend -->
          </div>
        </div>

        <!-- Movies Rating Section -->
        <h2 class="section-title">
          <i class="fas fa-star"></i>
          Rate These Movies
        </h2>

        <!-- Loading Spinner for Initial Movies -->
        <div class="loading-spinner" id="moviesLoading">
          <div class="spinner"></div>
          <p>Loading movies from IMDb dataset...</p>
        </div>

        <div class="movies-grid" id="moviesGrid">
          <!-- Movies will be populated by backend from IMDb dataset -->
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
          <button class="get-rec-btn" id="getRecBtn" disabled>
            <i class="fas fa-magic"></i> Get Recommendations
            <span id="recStatus">(0/3 rated)</span>
          </button>
          <button class="reset-btn" id="resetBtn">
            <i class="fas fa-redo"></i> Reset All Ratings
          </button>
        </div>

        <!-- Recommendations Section -->
        <div class="recommendations-section" id="recommendationsSection">
          <h2 class="section-title">
            <i class="fas fa-gift"></i>
            Your Personalized Recommendations
          </h2>
          <p style="margin-bottom: 30px; opacity: 0.9; font-size: 18px;">
            Based on your ratings, here are movies we think you'll love:
          </p>

          <!-- Loading Spinner for Recommendations -->
          <div class="loading-spinner" id="recLoading">
            <div class="spinner"></div>
            <p>Analyzing your ratings and generating recommendations...</p>
          </div>

          <div class="recommendations-grid" id="recommendationsGrid">
            <!-- Recommendations will be populated by backend -->
          </div>
        </div>
      </section>

      <!-- Footer -->
      <footer>
        <p>
          &copy; 2023 CineAI | AI-Powered Movie Analysis & Recommendation System
        </p>
        <p style="margin-top: 10px; font-size: 0.8rem">
          Note: Predictions are based on historical data and machine learning
          algorithms. Actual results may vary.
        </p>
      </footer>
    </div>

    <!-- JavaScript -->
    <script>
      // API Base URL (Now using single Flask server)
      const API_BASE = "http://localhost:5000/api";

      // App State
      let currentTab = "predictor";
      let ratedMovies = 0;
      let userRatings = {};
      let currentGenreFilter = "all";
      let currentMovies = [];

      // DOM Elements
      const apiStatus = document.getElementById("apiStatus");
      const progressCountEl = document.getElementById("progressCount");
      const progressFillEl = document.getElementById("progressFill");
      const getRecBtn = document.getElementById("getRecBtn");
      const recStatus = document.getElementById("recStatus");
      const moviesGrid = document.getElementById("moviesGrid");
      const moviesLoading = document.getElementById("moviesLoading");
      const searchResultsGrid = document.getElementById("searchResultsGrid");
      const searchResults = document.getElementById("searchResults");
      const searchLoading = document.getElementById("searchLoading");
      const recommendationsGrid = document.getElementById("recommendationsGrid");
      const recommendationsSection = document.getElementById(
        "recommendationsSection"
      );
      const recLoading = document.getElementById("recLoading");
      const genreTags = document.getElementById("genreTags");
      const predictorLoading = document.getElementById("predictorLoading");
      const resultContainer = document.getElementById("resultContainer");

      // Initialize the application
      document.addEventListener("DOMContentLoaded", function () {
        setupNavigation();
        setupEventListeners();
        checkAPIStatus();
        
        // Initialize the current tab
        showTab(currentTab);
        
        // Add sample placeholders
        addSamplePlaceholders();
        
        // Load initial movies for recommender
        if (window.location.hash === '#recommender' || window.location.hash === '') {
          loadInitialMovies();
        }
      });

      // Setup navigation between tabs
      function setupNavigation() {
        const tabs = document.querySelectorAll(".nav-tab");
        tabs.forEach((tab) => {
          tab.addEventListener("click", function () {
            const tabId = this.dataset.tab;
            switchTab(tabId);
          });
        });
      }

      // Switch between tabs
      function switchTab(tabId) {
        // Update active tab button
        document.querySelectorAll(".nav-tab").forEach((tab) => {
          tab.classList.remove("active");
        });
        document.querySelector(`[data-tab="${tabId}"]`).classList.add("active");

        // Update active section
        document.querySelectorAll(".section").forEach((section) => {
          section.classList.remove("active");
        });
        document.getElementById(tabId).classList.add("active");

        currentTab = tabId;
        
        // Load content for the tab
        if (tabId === "recommender") {
          loadInitialMovies();
        }
      }

      // Setup event listeners
      function setupEventListeners() {
        // Genre tag selection
        genreTags.addEventListener("click", function (e) {
          if (e.target.classList.contains("genre-tag")) {
            document.querySelectorAll(".genre-tag").forEach((t) => {
              t.classList.remove("active");
            });
            e.target.classList.add("active");
            currentGenreFilter = e.target.dataset.genre;
            filterMoviesByGenre(currentGenreFilter);
          }
        });

        // Search button click
        document
          .getElementById("searchBtn")
          .addEventListener("click", handleSearch);
        document
          .getElementById("searchInput")
          .addEventListener("keypress", function (e) {
            if (e.key === "Enter") handleSearch();
          });

        // Get recommendations button
        getRecBtn.addEventListener("click", getRecommendations);

        // Reset button
        document.getElementById("resetBtn").addEventListener("click", function () {
          if (confirm("Reset all ratings? This will clear your progress.")) {
            resetAllRatings();
          }
        });
      }

      // Check API status
      async function checkAPIStatus() {
        try {
          const response = await fetch(`${API_BASE}/health`);
          if (response.ok) {
            apiStatus.textContent = "API Connected";
            apiStatus.style.background = "rgba(0, 255, 0, 0.1)";
            apiStatus.style.color = "#0f0";
            return true;
          } else {
            throw new Error("API not responding");
          }
        } catch (error) {
          apiStatus.textContent = "Disconnected";
          apiStatus.style.background = "rgba(255, 0, 0, 0.1)";
          apiStatus.style.color = "#f00";
          return false;
        }
      }

      // Add sample placeholders
      function addSamplePlaceholders() {
        document
          .getElementById("movieName")
          .addEventListener("focus", function () {
            if (!this.value) {
              this.placeholder =
                "Try: Inception, Avatar, Titanic, The Dark Knight";
            }
          });

        document
          .getElementById("director")
          .addEventListener("focus", function () {
            if (!this.value) {
              this.placeholder =
                "Try: Christopher Nolan, James Cameron, Steven Spielberg";
            }
          });
      }

      // Show loading for predictor
      function showPredictorLoading() {
        predictorLoading.style.display = "block";
        resultContainer.style.display = "none";
      }

      // Hide loading for predictor
      function hidePredictorLoading() {
        predictorLoading.style.display = "none";
      }

      // Show tab
      function showTab(tabId) {
        if (tabId === "recommender") {
          // Initialize recommender UI
          updateProgress();
        }
      }

      // Movie Predictor Functions
      async function predictByName() {
        const movieName = document.getElementById("movieName").value.trim();

        if (!movieName) {
          alert("Please enter a movie name");
          return;
        }

        showPredictorLoading();

        try {
          const response = await fetch(`${API_BASE}/predict/name`, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              movie_name: movieName,
              release_year: document.getElementById("releaseYear").value || null,
            }),
          });

          const data = await response.json();

          if (data.success) {
            showPredictionResult(data);
          } else {
            alert("Prediction failed: " + data.error);
          }
        } catch (error) {
          alert(
            "Error connecting to server. Make sure the Flask backend is running on http://localhost:5000"
          );
          console.error("Error:", error);
        } finally {
          hidePredictorLoading();
        }
      }

      async function predictByDetails() {
        const director = document.getElementById("director").value.trim();
        const actor1 = document.getElementById("actor1").value.trim();
        const actor2 = document.getElementById("actor2").value.trim();
        const genre = document.getElementById("genre").value;

        if (!director || !actor1 || !genre) {
          alert("Please fill in Director, Actor 1, and Genre fields");
          return;
        }

        showPredictorLoading();

        try {
          const response = await fetch(`${API_BASE}/predict/details`, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              director: director,
              actor1: actor1,
              actor2: actor2 || "",
              genre: genre,
            }),
          });

          const data = await response.json();

          if (data.success) {
            showPredictionResult(data);
          } else {
            alert("Prediction failed: " + data.error);
          }
        } catch (error) {
          alert(
            "Error connecting to server. Make sure the Flask backend is running on http://localhost:5000"
          );
          console.error("Error:", error);
        } finally {
          hidePredictorLoading();
        }
      }

      function showPredictionResult(data) {
        const resultBadge = document.getElementById("resultBadge");
        const predictionSummary = document.getElementById("predictionSummary");
        const predictedRating = document.getElementById("predictedRating");
        const confidenceScore = document.getElementById("confidenceScore");
        const boxOfficePotential = document.getElementById("boxOfficePotential");
        const keyFactors = document.getElementById("keyFactors");

        // Update result badge
        resultBadge.textContent = data.prediction;
        if (data.prediction === "HIT") {
          resultBadge.className = "result-badge hit-badge";
          resultBadge.style.animation = "pulse 2s infinite";
        } else {
          resultBadge.className = "result-badge flop-badge";
          resultBadge.style.animation = "pulse 2s infinite";
        }

        // Update summary
        if (data.movie_name) {
          predictionSummary.textContent =
            `Movie "${data.movie_name}"${
              data.release_year && data.release_year !== "N/A"
                ? ` (${data.release_year})`
                : ""
            } is predicted to be a ${data.prediction}. ` +
            `Our AI model gives it a rating of ${data.predicted_rating}/10 with ${data.confidence}% confidence.`;
        } else {
          predictionSummary.textContent =
            `The combination of ${data.director} (Director), ${data.actor1}${
              data.actor2 && data.actor2 !== "N/A" ? ` and ${data.actor2}` : ""
            } (Actors) in ${data.genre} genre is predicted to be a ${
              data.prediction
            }. ` +
            `Our AI model gives it a rating of ${data.predicted_rating}/10 with ${data.confidence}% confidence.`;
        }

        // Update metrics
        predictedRating.textContent = `${data.predicted_rating}/10`;
        predictedRating.className =
          data.prediction === "HIT"
            ? "metric-value hit-value"
            : "metric-value flop-value";

        confidenceScore.textContent = `${data.confidence}%`;
        confidenceScore.className =
          data.prediction === "HIT"
            ? "metric-value hit-value"
            : "metric-value flop-value";

        // Set box office potential based on rating
        const rating = parseFloat(data.predicted_rating);
        if (rating >= 8)
          boxOfficePotential.innerHTML =
            '$$$$ <i class="fas fa-star" style="color: gold;"></i>';
        else if (rating >= 6.5) boxOfficePotential.innerHTML = "$$$";
        else if (rating >= 5) boxOfficePotential.innerHTML = "$$";
        else boxOfficePotential.innerHTML = "$";

        // Update key factors
        if (data.factors && Array.isArray(data.factors)) {
          keyFactors.innerHTML = "";
          data.factors.forEach((factor) => {
            const li = document.createElement("li");
            li.style.padding = "8px 0";
            li.style.borderBottom = "1px solid rgba(255, 255, 255, 0.1)";
            li.innerHTML = `<i class="fas fa-check-circle" style="color: #4cc9f0; margin-right: 10px;"></i> ${factor}`;
            keyFactors.appendChild(li);
          });
        }

        // Show result container with animation
        resultContainer.style.display = "block";
        resultContainer.style.opacity = "0";
        resultContainer.style.transform = "translateY(20px)";

        setTimeout(() => {
          resultContainer.style.transition = "all 0.5s ease";
          resultContainer.style.opacity = "1";
          resultContainer.style.transform = "translateY(0)";
        }, 100);

        // Scroll to result
        resultContainer.scrollIntoView({ behavior: "smooth", block: "start" });
      }

      // Movie Recommender Functions
      async function loadInitialMovies() {
        moviesLoading.style.display = "block";
        moviesGrid.innerHTML = "";
        
        try {
          const response = await fetch(`${API_BASE}/movies/popular?n=12`);
          const data = await response.json();
          
          if (data.success) {
            currentMovies = data.movies;
            displayMovies(data.movies);
            moviesLoading.style.display = "none";
          } else {
            showEmptyState(moviesGrid, "Failed to load movies");
            moviesLoading.style.display = "none";
          }
        } catch (error) {
          console.error("Error loading movies:", error);
          showEmptyState(moviesGrid, "Error loading movies");
          moviesLoading.style.display = "none";
        }
      }

      async function rateMovie(movieId, liked) {
        console.log(`Rating movie ${movieId}: ${liked ? "like" : "dislike"}`);

        try {
          const response = await fetch(`${API_BASE}/movies/rate`, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              movieId: movieId,
              liked: liked
            }),
          });

          const data = await response.json();
          
          if (data.success) {
            // Update local state
            const previousRating = userRatings[movieId];

            if (previousRating === liked) {
              // Unrate if clicking same button again
              delete userRatings[movieId];
              ratedMovies--;
            } else {
              // Add or update rating
              userRatings[movieId] = liked;
              if (previousRating === undefined) {
                ratedMovies++;
              }
            }

            updateProgress();

            // Show feedback
            const movieTitle =
              currentMovies.find((m) => m.id === movieId)?.title ||
              `Movie ${movieId}`;
            const feedback = liked
              ? `You liked "${movieTitle}"!`
              : `Noted: "${movieTitle}" isn't your taste.`;
            showFeedback(feedback);
          }
        } catch (error) {
          console.error("Error rating movie:", error);
        }
      }

      async function updateProgress() {
        try {
          const response = await fetch(`${API_BASE}/user/progress`);
          const data = await response.json();
          
          if (data.success) {
            const progress = data.progress;
            ratedMovies = progress.count;
            
            progressCountEl.textContent = `${ratedMovies}/3`;
            const progressPercent = progress.progress;
            progressFillEl.style.width = `${progressPercent}%`;

            recStatus.textContent = `(${ratedMovies}/3 rated)`;

            if (ratedMovies >= 3) {
              getRecBtn.disabled = false;
            } else {
              getRecBtn.disabled = true;
            }
          }
        } catch (error) {
          console.error("Error updating progress:", error);
        }
      }

      function showFeedback(message) {
        // Create feedback element
        const feedback = document.createElement("div");
        feedback.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, var(--success), var(--blue));
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            animation: slideIn 0.3s ease;
        `;

        // Add custom animation
        const style = document.createElement("style");
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
        `;
        document.head.appendChild(style);

        feedback.innerHTML = `<i class="fas fa-check-circle"></i> ${message}`;
        document.body.appendChild(feedback);

        // Remove after 3 seconds
        setTimeout(() => {
          feedback.style.animation = "slideIn 0.3s ease reverse";
          setTimeout(() => {
            if (feedback.parentNode) {
              document.body.removeChild(feedback);
            }
          }, 300);
        }, 3000);
      }

      async function handleSearch() {
        const query = document.getElementById("searchInput").value.trim();
        if (!query) {
          showFeedback("Please enter a search term");
          return;
        }

        console.log(`Searching for: ${query}`);

        // Show loading
        searchLoading.style.display = "block";
        searchResults.style.display = "block";
        searchResultsGrid.innerHTML = "";

        try {
          const response = await fetch(`${API_BASE}/movies/search?q=${encodeURIComponent(query)}&genre=${currentGenreFilter}`);
          const data = await response.json();
          
          searchLoading.style.display = "none";

          if (data.success) {
            displaySearchResults(data.movies);
          } else {
            searchResultsGrid.innerHTML = `
              <div class="empty-state">
                <i class="fas fa-search"></i>
                <h3>Search failed</h3>
                <p>${data.error || "Unable to search movies"}</p>
              </div>
            `;
          }
        } catch (error) {
          console.error("Error searching:", error);
          searchLoading.style.display = "none";
          searchResultsGrid.innerHTML = `
            <div class="empty-state">
              <i class="fas fa-search"></i>
              <h3>Search error</h3>
              <p>Unable to connect to server</p>
            </div>
          `;
        }

        // Scroll to search results
        searchResults.scrollIntoView({ behavior: "smooth", block: "start" });
      }

      async function filterMoviesByGenre(genre) {
        console.log(`Filtering by genre: ${genre}`);
        currentGenreFilter = genre;
        
        const query = document.getElementById("searchInput").value.trim();
        
        if (query || genre !== 'all') {
          // If there's a search query or genre filter, perform search
          if (query) {
            handleSearch();
          } else {
            // Just filter by genre
            searchLoading.style.display = "block";
            searchResults.style.display = "block";
            searchResultsGrid.innerHTML = "";
            
            try {
              const response = await fetch(`${API_BASE}/movies/search?q=&genre=${genre}`);
              const data = await response.json();
              
              searchLoading.style.display = "none";

              if (data.success) {
                displaySearchResults(data.movies);
              }
            } catch (error) {
              console.error("Error filtering:", error);
              searchLoading.style.display = "none";
            }
          }
        }
      }

      async function getRecommendations() {
        if (ratedMovies < 3) {
          showFeedback("Please rate at least 3 movies to get recommendations");
          return;
        }

        console.log("Getting recommendations based on ratings:", userRatings);

        // Show loading
        recLoading.style.display = "block";
        recommendationsSection.style.display = "block";
        recommendationsGrid.innerHTML = "";

        // Show recommendations section
        recommendationsSection.scrollIntoView({
          behavior: "smooth",
          block: "start",
        });

        try {
          const response = await fetch(`${API_BASE}/recommendations`);
          const data = await response.json();
          
          recLoading.style.display = "none";

          if (data.success) {
            displayRecommendations(data.recommendations);
          } else {
            recommendationsGrid.innerHTML = `
              <div class="empty-state" style="grid-column: 1/-1;">
                <i class="fas fa-robot"></i>
                <h3>No recommendations available</h3>
                <p>${data.error || "Try rating more movies"}</p>
              </div>
            `;
          }
        } catch (error) {
          console.error("Error getting recommendations:", error);
          recLoading.style.display = "none";
          recommendationsGrid.innerHTML = `
            <div class="empty-state" style="grid-column: 1/-1;">
              <i class="fas fa-robot"></i>
              <h3>Error getting recommendations</h3>
              <p>Unable to connect to server</p>
            </div>
          `;
        }
      }

      function createMovieCard(movie, number) {
        const card = document.createElement("div");
        card.className = "movie-card";
        card.dataset.id = movie.id;

        const ratingState = userRatings[movie.id];
        const likeClass = ratingState === true ? "rated" : "";
        const dislikeClass = ratingState === false ? "rated" : "";

        // Format genres as badges
        const genreBadges = Array.isArray(movie.genres)
          ? movie.genres
              .map((genre) => `<span class="movie-genre">${genre}</span>`)
              .join("")
          : `<span class="movie-genre">${movie.genre || "Unknown"}</span>`;

        card.innerHTML = `
                <div class="movie-number">${number}</div>
                <div class="movie-header">
                    <div class="movie-title">
                        ${movie.title || "Movie Title"}
                        <span class="movie-year">${movie.year || "N/A"}</span>
                    </div>
                    <div class="movie-rating">
                        <i class="fas fa-star"></i> ${movie.rating || "N/A"}/10
                    </div>
                </div>
                <div class="movie-meta">
                    ${genreBadges}
                    ${
                      movie.duration
                        ? `<span class="movie-duration"><i class="far fa-clock"></i> ${movie.duration}</span>`
                        : ""
                    }
                </div>
                <p class="movie-description">${
                  movie.description || "Description will load from IMDb dataset."
                }</p>
                ${
                  movie.actors
                    ? `<div class="movie-actors">Starring: ${movie.actors}</div>`
                    : ""
                }
                ${
                  movie.director
                    ? `<div class="movie-director">Directed by: ${movie.director}</div>`
                    : ""
                }
                <div class="rating-buttons">
                    <button class="rating-btn btn-like ${likeClass}">
                        <i class="fas fa-thumbs-up"></i> I Like This
                    </button>
                    <button class="rating-btn btn-dislike ${dislikeClass}">
                        <i class="fas fa-thumbs-down"></i> Not For Me
                    </button>
                </div>
            `;

        return card;
      }

      function displayMovies(movies) {
        moviesGrid.innerHTML = "";
        currentMovies = movies;

        if (movies.length === 0) {
          showEmptyState(moviesGrid, "No movies found");
          return;
        }

        movies.forEach((movie, index) => {
          const movieCard = createMovieCard(movie, index + 1);
          moviesGrid.appendChild(movieCard);

          // Add rating button listeners
          const likeBtn = movieCard.querySelector(".btn-like");
          const dislikeBtn = movieCard.querySelector(".btn-dislike");

          likeBtn.addEventListener("click", () => rateMovie(movie.id, true));
          dislikeBtn.addEventListener("click", () =>
            rateMovie(movie.id, false)
          );
        });
      }

      function displaySearchResults(results) {
        searchResultsGrid.innerHTML = "";

        if (results.length === 0) {
          searchResultsGrid.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-search"></i>
                        <h3>No movies found</h3>
                        <p>Try a different search term.</p>
                    </div>
                `;
          return;
        }

        results.forEach((movie, index) => {
          const movieCard = createMovieCard(movie, index + 1);
          searchResultsGrid.appendChild(movieCard);

          // Add rating button listeners
          const likeBtn = movieCard.querySelector(".btn-like");
          const dislikeBtn = movieCard.querySelector(".btn-dislike");

          likeBtn.addEventListener("click", () => rateMovie(movie.id, true));
          dislikeBtn.addEventListener("click", () =>
            rateMovie(movie.id, false)
          );
        });
      }

      function displayRecommendations(recommendations) {
        recommendationsGrid.innerHTML = "";

        if (recommendations.length === 0) {
          recommendationsGrid.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-robot"></i>
                        <h3>No recommendations yet</h3>
                        <p>Rate more movies to get better suggestions.</p>
                    </div>
                `;
          return;
        }

        recommendations.forEach((rec) => {
          const recCard = createRecommendationCard(rec);
          recommendationsGrid.appendChild(recCard);
        });
      }

      function createRecommendationCard(rec) {
        const card = document.createElement("div");
        card.className = "recommendation-card";

        card.innerHTML = `
                <div class="match-badge">${rec.match_score || "High"} Match</div>
                <h3 class="rec-title">${rec.title} <span class="rec-year">(${
          rec.year
        })</span></h3>
                <div class="rec-meta">
                    <span class="rec-genre">${
                      Array.isArray(rec.genres)
                        ? rec.genres.join(", ")
                        : rec.genres
                    }</span>
                    <span class="rec-rating"><i class="fas fa-star"></i> ${
                      rec.rating
                    }/10</span>
                </div>
                <p class="rec-description">${
                  rec.description || "Description from IMDb dataset."
                }</p>
                <div class="rec-reason">
                    <strong><i class="fas fa-lightbulb"></i> Why we think you'll like it:</strong><br>
                    ${rec.reason || "Based on your ratings and preferences."}
                </div>
                <div class="rec-actions">
                    <button class="rec-btn btn-watch">
                        <i class="fas fa-play-circle"></i> Watch Trailer
                    </button>
                    <button class="rec-btn">
                        <i class="fas fa-plus"></i> Add to List
                    </button>
                </div>
            `;

        return card;
      }

      async function resetAllRatings() {
        try {
          const response = await fetch(`${API_BASE}/reset`, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
          });

          const data = await response.json();
          
          if (data.success) {
            ratedMovies = 0;
            userRatings = {};
            updateProgress();

            // Refresh movie cards to remove rated state
            const movieCards = document.querySelectorAll(".movie-card");
            movieCards.forEach((card) => {
              const likeBtn = card.querySelector(".btn-like");
              const dislikeBtn = card.querySelector(".btn-dislike");
              likeBtn.classList.remove("rated");
              dislikeBtn.classList.remove("rated");
            });

            // Hide recommendations
            recommendationsSection.style.display = "none";

            showFeedback("All ratings have been reset");
          }
        } catch (error) {
          console.error("Error resetting ratings:", error);
        }
      }

      function showEmptyState(container, message) {
        container.innerHTML = `
                <div class="empty-state">
                    <i class="fas fa-film"></i>
                    <h3>${message}</h3>
                    <p>Connect this frontend to your Python backend with IMDb dataset.</p>
                </div>
            `;
      }
    </script>
  </body>
</html>